<section fxLayout="row wrap" fxLayoutAlign="center center">
    <mat-card fxFlex="600px" fxFlex.xs="100%">
        <div fxLayout="column wrap" fxLayoutAlign="left left" fxLayoutGap="10px"
            [ngClass]="{'has-answered': hasAnswered, 'is-correct': isCorrect(), 'is-mostly-correct': isSimilarOnly() || isArtikelFehlerOnly() || isSimilarAndArtikelFehler(), 'is-wrong': isWrong() }">
            <mat-card-title>
                Übersetze ins Französische.
                <span *ngIf="!isProdMode"> (Id {{vokabel!.id}})</span>
                <div class="info-position">
                    <div *ngIf="!vokabel!.isInserted">{{vokabel!.position + 1}}/{{lektion!.total}}</div>
                    <div *ngIf="!vokabel!.isInserted">{{vokabel!.bereichName}}</div>
                    <div *ngIf="vokabel!.isInserted">Vorige Vokabel</div>
                    <div *ngIf="vokabel!.wiederholung">{{vokabel!.wiederholung}}. Wiederholung</div>
                </div>
            </mat-card-title>
            <div class="prev-error" *ngIf="vokabel!.isInserted">
                (Weil du <span class="word">{{vokabel!.reasonInserted}}</span> falsch hattest.)
            </div>
            <mat-card-content>
                <div class="question">
                    {{vokabel!.deu}}
                </div>
                <div class="solution">
                    <div *ngIf="hasAnswered && isCorrect()">
                        <p *ngIf="!vokabel!.wiederholung" class="heading">Richtig, sehr gut!</p>
                        <p *ngIf="vokabel!.wiederholung" class="heading">Richtig dieses Mal, sehr gut!</p>
                        <p class="truth">
                            <span class="result-correct" [innerHtml]="getHtmlStringTruthCorrect()"></span>
                            <span class="phonetik">[{{vokabel!.phonetik}}]</span>
                        </p>
                    </div>
                    <div *ngIf="hasAnswered && isSimilarOnly()">
                        <p class="heading">Fast richtig, achte auf Accents.</p>
                        <p class="truth">
                            <span class="result-accent-fehler" [innerHtml]="getHtmlStringTruthSimilar()"></span>
                            <span class="phonetik">[{{vokabel!.phonetik}}]</span>
                        </p>
                    </div>
                    <div *ngIf="hasAnswered && isArtikelFehlerOnly()">
                        <p class="heading">Fast richtig, achte auf den Artikel!</p>
                        <p class="truth">
                            <span class="result-artikel-fehler" [innerHtml]="getHtmlStringTruthCorrect()"></span>
                            <span class="phonetik">[{{vokabel!.phonetik}}]</span>
                        </p>
                    </div>
                    <div *ngIf="hasAnswered && isSimilarAndArtikelFehler()">
                        <p class="heading">Fast richtig, achte auf Accents und den Artikel.</p>
                        <p class="truth">
                            <span class="result-artikel-fehler-and-accent-fehler"
                                [innerHtml]="getHtmlStringTruthSimilar()"></span>
                            <span class="phonetik">[{{vokabel!.phonetik}}]</span>
                        </p>
                    </div>
                    <div *ngIf="hasAnswered && isWrong()">
                        <p class="heading" *ngIf="checkResult?.answerSan">Leider falsch, richtige Antwort:</p>
                        <p class="heading" *ngIf="!checkResult?.answerSan">Kein Problem, richtige Antwort:</p>
                        <p class="truth">
                            <span class="result-wrong">{{checkResult?.truth}}</span>
                            <span class="phonetik">[{{vokabel!.phonetik}}]</span>
                        </p>
                    </div>
                </div>
                <form [formGroup]="vokabelForm" novalidate autocomplete="off">
                    <div class="input-group mb-2">
                        <input class="form-control form-control-lg" type="text" placeholder=".form-control-lg"
                            placeholder="Schreibe deine Antwort auf Französisch" formControlName="antwort" id="antwort"
                            (keydown.enter)="checkAnswer()" #refAntwort>
                        <div class="input-group-append result-info">
                            <div class="input-group-text is-correct" *ngIf="isCorrect()">
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check-circle"
                                    fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd"
                                        d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                                    <path fill-rule="evenodd"
                                        d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z" />
                                </svg>
                            </div>
                            <div class="input-group-text is-mostly-correct"
                                *ngIf="isSimilarOnly() || isArtikelFehlerOnly() || isSimilarAndArtikelFehler()">
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-exclamation-triangle"
                                    fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd"
                                        d="M7.938 2.016a.146.146 0 0 0-.054.057L1.027 13.74a.176.176 0 0 0-.002.183c.016.03.037.05.054.06.015.01.034.017.066.017h13.713a.12.12 0 0 0 .066-.017.163.163 0 0 0 .055-.06.176.176 0 0 0-.003-.183L8.12 2.073a.146.146 0 0 0-.054-.057A.13.13 0 0 0 8.002 2a.13.13 0 0 0-.064.016zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z" />
                                    <path
                                        d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z" />
                                </svg>
                            </div>
                            <div class="input-group-text is-wrong" *ngIf="isWrong()">
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-x-circle"
                                    fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd"
                                        d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                                    <path fill-rule="evenodd"
                                        d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z" />
                                    <path fill-rule="evenodd"
                                        d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z" />
                                </svg>
                            </div>
                        </div>
                    </div>
                </form>
                <app-sonderzeichen-leiste [input]="antwort" [inputRef]="refAntwort"></app-sonderzeichen-leiste>
                <!-- <p class="truth" *ngIf="numCorrectAnswersInRow >= 1">
                    {{numCorrectAnswersInRow}} richtige Antwort<span
                        *ngIf="numCorrectAnswersInRow > 1">en</span> hintereinander!
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-emoji-smile"
                        fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                        <path fill-rule="evenodd"
                            d="M4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683z" />
                        <path
                            d="M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z" />
                    </svg>
                </p> -->
            </mat-card-content>
            <mat-card-actions align="start">
                <button mat-raised-button color="accent" [disabled]="hasAnswered" (click)="forceAnswer()">Ich weiß die
                    Antwort nicht</button>
                <button mat-raised-button color="primary" [disabled]="!vokabelForm.valid" *ngIf="!hasAnswered"
                    (click)="checkAnswer()">Überprüfen</button>
                <button mat-raised-button color="primary" *ngIf="hasAnswered" (click)="proceed()"
                    #refTest>Fortsetzen</button>
            </mat-card-actions>
        </div>
    </mat-card>
</section>